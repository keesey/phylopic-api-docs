openapi: 3.0.1
info:
  title: PhyloPic API
  description: Documentation for the next version of *PhyloPic*'s Application Programming Interface.
  contact:
    name: Mike Keesey
    email: keesey+phylopic@gmail.com
  license:
    name: CC0
    url: https://creativecommons.org/share-your-work/public-domain/cc0
  version: 2.0.0-alpha
servers:
- url: https://fflpaoip5k.execute-api.us-west-2.amazonaws.com/prod
  description: The production API server
components:
  headers:
    Accept-Ranges:
      description: The units acceptable for range requests. Always `items`.
      example: items
      schema:
        pattern: '^items$'
        type: string
    Content-Length:
      description: The length of the content, in bytes.
      example: 1024
      schema:
        format: number
        type: string
    Content-Range:
      description: |
        The range of embedded items, in the format `items {start}-{end}/{total}`.
      example: items 0-9/88
      schema:
        pattern: '^items \d+-\d+/\d+$'
        type: string
    Content-Type:
      description: The MIME type for the payload, including API version. Always `application/vnd.phylopic.v2+json`.
      example: application/vnd.phylopic.v2+json
      schema:
        format: mimetype
        type: string
    Location:
      description: The URL for the resource.
      schema:
        format: url
        type: string
  parameters:
    Accept:
      name: Accept
      in: header
      description: |
        The MIME type for the response, including API version. Must allow `application/vnd.phylopic.v2+json`.

        If omitted, `*/*` (a wildcard allowing all types) is assumed, and the response's `Content-Type` header will be `application/vnd.phylopic.v2+json`.
      schema:
        format: mimetype
        type: string
      example: application/vnd.phylopic.v2+json
    Content-Type:
      name: Content-Type
      in: header
      required: true
      description: The MIME type for the payload, including API version. Must be `application/vnd.phylopic.v2+json`.
      schema:
        format: mimetype
        type: string
      example: application/vnd.phylopic.v2+json
    Range:
      name: Range
      in: header
      required: true
      description: |
        A range of the items to read, inclusive.

        Example: `items=0-9`
      schema:
        pattern: '^items=\d+-\d+$'
        type: string
      example: items=0-9
    embed-Image:
      name: embed
      in: query
      description: |
        A space-separated list of related entities to embed. May include:
        - `contributor`
        - `generalNode`
        - `nodes`
        - `specificNode`

        If omitted, no entities will be embedded.
      schema:
        pattern: '^((contributor|generalNode|nodes|specificNode) )*(contributor|generalNode|nodes|specificNode)$'
        type: string
    embed-Node:
      name: embed
      in: query
      description: |
        A space-separated list of related entities to embed. May include:
        - `childNodes`
        - `contributor`
        - `parentNode`
        - `primaryImage`

        If omitted, no entities will be embedded.
      schema:
        pattern: '^((contributor|childNodes|parentNode|primaryImage) )*(contributor|childNodes|parentNode|primaryImage)$'
        type: string
    uuid-Entity:
      name: uuid
      in: path
      required: true
      description: The UUID of the entity.
      schema:
        format: uuid
        type: string
        example: '123e4567-e89b-12d3-a456-426655440000'
  responses:
    '204':
      description: The request completed successfully. No further information is provided.
    '302':
      description: The requested resource has been found at another location.
      headers:
        Content-Type:
          $ref: '#/components/headers/Content-Type'
        Location:
          $ref: '#/components/headers/Location'
      content:
        application/vnd.phylopic.v2+json:
          schema:
            $ref: '#/components/schemas/EntityReference'
    '307':
      description: The requested resource is available at another location, temporarily.
      headers:
        Content-Type:
          $ref: '#/components/headers/Content-Type'
        Location:
          $ref: '#/components/headers/Location'
      content:
        application/vnd.phylopic.v2+json:
          schema:
            type: object
            required:
              - _links
            properties:
              _links:
                type: object
                required:
                  - equivalent
                properties:
                  equivalent:
                    $ref: '#/components/schemas/Link'
    '400':
      description: There is an error in the request.
      headers:
        Content-Type:
          $ref: '#/components/headers/Content-Type'
      content:
        application/vnd.phylopic.v2+json:
          schema:
            $ref: '#/components/schemas/Errors'
    '401':
      description: The user is not currently authenticated.
      headers:
        Content-Type:
          $ref: '#/components/headers/Content-Type'
      content:
        application/vnd.phylopic.v2+json:
          schema:
            $ref: '#/components/schemas/Errors'
    '403':
      description: The user does not have permission to perform this action.
      headers:
        Content-Type:
          $ref: '#/components/headers/Content-Type'
      content:
        application/vnd.phylopic.v2+json:
          schema:
            $ref: '#/components/schemas/Errors'
    '404':
      description: The resource cannot be found.
      headers:
        Content-Type:
          $ref: '#/components/headers/Content-Type'
      content:
        application/vnd.phylopic.v2+json:
          schema:
            $ref: '#/components/schemas/Errors'
    '406':
      description: The request cannot be accepted because the `Accept` header does not allow an available type of content.
      headers:
        Content-Type:
          $ref: '#/components/headers/Content-Type'
      content:
        application/vnd.phylopic.v2+json:
          schema:
            $ref: '#/components/schemas/Errors'
    '409':
      description: |
        An entity already exists for the specified UUID.

        (This likely means `PATCH` should have been used instead.)
      headers:
        Content-Type:
          $ref: '#/components/headers/Content-Type'
        Location:
          $ref: '#/components/headers/Location'
      content:
        application/vnd.phylopic.v2+json:
          schema:
            $ref: '#/components/schemas/Errors'
    '410':
      description: The resource has been removed.
      headers:
        Content-Type:
          $ref: '#/components/headers/Content-Type'
      content:
        application/vnd.phylopic.v2+json:
          schema:
            $ref: '#/components/schemas/Errors'
    '413':
      description: The payload is too large.
      headers:
        Content-Type:
          $ref: '#/components/headers/Content-Type'
      content:
        application/vnd.phylopic.v2+json:
          schema:
            $ref: '#/components/schemas/Errors'
    '416':
      description: The requested range is not satisfiable.
      headers:
        Content-Type:
          $ref: '#/components/headers/Content-Type'
      content:
        application/vnd.phylopic.v2+json:
          schema:
            $ref: '#/components/schemas/Errors'
    'list-Image':
      description: |
        [HAL](http://stateless.co/hal_specification.html) [JSON](https://www.json.org/) list of embedded image records.
      headers:
        Accept-Ranges:
          $ref: '#/components/headers/Accept-Ranges'
        Content-Range:
          $ref: '#/components/headers/Content-Range'
        Content-Type:
          $ref: '#/components/headers/Content-Type'
      content:
        application/vnd.phylopic.v2+json:
          schema:
            type: object
            required:
              - _embedded
              - _links
            properties:
              _embedded:
                type: object
                description: Container for embedded entities.
                properties:
                  items:
                    type: array
                    description: The requested image entities.
                    items:
                      $ref: '#/components/schemas/ImageWithEmbedded'
              _links:
                type: object
                description: Container for a link to this resource (`self`).
                required:
                  - self
                properties:
                  self:
                    allOf:
                      - $ref: '#/components/schemas/Link'
                      - description: Link to this entity.
              total:
                description: The total number of items in the set.
                format: uint
                type: number
    'list-Node':
      description: |
        [HAL](http://stateless.co/hal_specification.html) [JSON](https://www.json.org/) list of embedded node records.
      headers:
        Accept-Ranges:
          $ref: '#/components/headers/Accept-Ranges'
        Content-Range:
          $ref: '#/components/headers/Content-Range'
        Content-Type:
          $ref: '#/components/headers/Content-Type'
      content:
        application/vnd.phylopic.v2+json:
          schema:
            type: object
            required:
              - _embedded
              - _links
            properties:
              _embedded:
                type: object
                description: Container for embedded entities.
                properties:
                  items:
                    type: array
                    description: The requested node entities.
                    items:
                      $ref: '#/components/schemas/NodeWithEmbedded'
              _links:
                description: Container for a link to this resource (`self`).
                type: object
                required:
                  - self
                properties:
                  self:
                    allOf:
                      - $ref: '#/components/schemas/Link'
                      - description: Link to this entity.
              total:
                description: The total number of items in the set.
                format: uint
                type: number
  schemas:
    Account:
      description: A user's account information.
      required:
        - _links
        - email
        - familyName
        - givenName
        - role
      allOf:
        - $ref: '#/components/schemas/Entity'
        - type: object
          properties:
            _links:
              type: object
              required:
                - imageSet
                - nodeSet
                - self
              properties:
                imageSet:
                  allOf:
                    - $ref: '#/components/schemas/Link'
                    - readOnly: true
                nodeSet:
                  allOf:
                    - $ref: '#/components/schemas/Link'
                    - readOnly: true
            email:
              description: The user's email address.
              format: email
              readOnly: true
              type: string
            familyName:
              description: The user's family name (or surname).
              readOnly: true
              type: string
              example: 'Linnaeus'
            givenName:
              description: The user's given name.
              readOnly: true
              type: string
              example: 'Carolus'
            role:
              description: The user's role.
              pattern: '^(contributor|admin)$'
              readOnly: true
              type: string
              example: 'contributor'
    Domain:
      description: A domain for all entities of a given kind.
      type: object
      required:
        - _links
      properties:
        _links:
          type: object
          required:
            - self
          properties:
            self:
              $ref: '#/components/schemas/Link'
    Entity:
      description: Common properties for all entities.
      required:
        - _links
        - created
        - modified
        - uuid
      allOf:
        - $ref: '#/components/schemas/EntityReference'
        - type: object
          properties:
            created:
              description: The time the entity was created.
              format: date-time
              readOnly: true
              type: string
            modified:
              description: The last time the entity was modified.
              format: date-time
              readOnly: true
              type: string
    EntityReference:
      description: Identifier and link for an entity.
      type: object
      required:
        - _links
        - uuid
      properties:
        _links:
          type: object
          required:
            - self
          properties:
            self:
              $ref: '#/components/schemas/Link'
        uuid:
          description: The universally unique identifier for this entity.
          format: uuid
          type: string
          example: 123e4567-e89b-12d3-a456-426655440000
    Errors:
      description: List of errors.
      type: array
      items:
        type: object
        required:
          - developerMessage
          - type
          - userMessage
        properties:
          developerMessage:
            description: A message with details for developers.
            type: string
            example: 'Failure at line 100 of file script.scr.'
          documentation:
            description: A link to documentation for the error.
            format: url
            type: string
            example: 'http://domain/path/help.html'
          field:
            description: The path to the field in the payload that caused the error.
            type: string
            example: 'attribution'
          type:
            description: The type of error, from [this list](https://docs.aws.amazon.com/apigateway/api-reference/resource/gateway-response/#responseType).
            type: string
            example: BAD_REQUEST_PARAMETERS
          userMessage:
            description: A message to be presented to the user.
            type: string
            example: 'This is an error message legible to users.'
    Image:
      allOf:
        - $ref: '#/components/schemas/Entity'
        - description: An image illustrating one or more nodes.
          required:
            - _links
            - attribution
          type: object
          properties:
            attribution:
              type: string
              example: 'Charles Knight'
              nullable: true
            _links:
              $ref: '#/components/schemas/ImageLinks'
    ImageDomain:
      allOf:
        - $ref: '#/components/schemas/Domain'
        - type: object
          description: The domain for all images.
          required:
            - _links
          properties:
            _links:
              type: object
              required:
                - totalSet
              properties:
                totalSet:
                  allOf:
                    - $ref: '#/components/schemas/Link'
                    - description: Link to the set of all active images.
    ImageLinks:
      type: object
      required:
        - contributor
        - generalNode
        - http://ogp.me/ns#image
        - license
        - nodes
        - resizedFiles
        - self
        - sourceFile
        - specificNode
        - twitter:image
        - vectorFile
      properties:
        contributor:
          allOf:
            - $ref: '#/components/schemas/Link'
            - description: A link to the account of the user who submitted this image.
              readOnly: true
        generalNode:
          allOf:
            - $ref: '#/components/schemas/Link'
            - description: A link to the node indicating how generally the image can be applied, either an ancestor of `specificNode` or a node indicating a common ancestor with `specificNode`.
              nullable: true
        'http://ogp.me/ns#image':
          allOf:
            - $ref: '#/components/schemas/MediaLink'
            - description: A link to an image for use with Open Graph (PNG format).
              readOnly: true
        license:
          allOf:
            - $ref: '#/components/schemas/Link'
            - description: A link to the license that this image is under.
        nodes:
          type: array
          description: Links to all nodes that this image illustrates, based on `specificNode` and (if provided) `generalNode`.
          readOnly: true
          items:
            $ref: '#/components/schemas/Link'
        resizedFiles:
          type: array
          description: A list of links to raster image files (PNG format) of various sizes.
          readOnly: true
          items:
            $ref: '#/components/schemas/MediaLink'
        sourceFile:
          allOf:
            - $ref: '#/components/schemas/MediaLink'
            - description:  A link to the raster image file as it was submitted. May be any of the accepted raster image formats.
              readOnly: true
        specificNode:
          allOf:
            - $ref: '#/components/schemas/Link'
            - description: A link to the node indicating the specific taxon that this image illustrates.
        submission:
          allOf:
            - $ref: '#/components/schemas/Link'
            - description: A link for viewing the latest submitted changes.
        'twitter:image':
          allOf:
            - $ref: '#/components/schemas/MediaLink'
            - description: A link to an image for use with Twitter (PNG format).
              readOnly: true
        vectorFile:
          allOf:
            - $ref: '#/components/schemas/MediaLink'
            - description: A link to the vector image file as it was submitted. Always in SVG format.
              readOnly: true
              nullable: true
    ImagePatch:
      description: Updates for an image.
      type: object
      properties:
        attribution:
          type: string
          example: 'Charles Knight'
          nullable: true
        _links:
          type: object
          properties:
            generalNode:
              allOf:
                - $ref: '#/components/schemas/Link'
                - description: A link to the node indicating how generally the image can be applied, either an ancestor of `specificNode` or a node indicating a common ancestor with `specificNode`.
                  nullable: true
            license:
              allOf:
                - $ref: '#/components/schemas/Link'
                - description: A link to the license that this image is under.
            sourceFile:
              allOf:
                - $ref: '#/components/schemas/Link'
                - description: |
                    A link where the `href` field contains the image file data, using the `data:` scheme. Example:

                    ```
                    data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==
                    ```
            specificNode:
              allOf:
                - $ref: '#/components/schemas/Link'
                - description: A link to the node indicating the specific taxon that this image illustrates.
            vectorFile:
              allOf:
                - $ref: '#/components/schemas/Link'
                - description: |
                    A link where the `href` field contains the image file data, using the `data:` scheme. Example:
                    
                    ```
                    data:image/svg+xml,<svg width="1" height="1"></svg>
                    ```

                    If this is included, then `sourceFile` must be included as well.
    ImagePost:
      description: Data for creating a new image.
      required:
        - _links
      type: object
      properties:
        _links:
          type: object
          required:
            - generalNode
            - license
            - sourceFile
            - specificNode
            - vectorFile
          properties:
            generalNode:
              allOf:
                - $ref: '#/components/schemas/Link'
                - description: |
                    A link to the node indicating how generally the image can be applied, either an ancestor of `specificNode` or a node indicating a common ancestor with `specificNode`.

                    May be `null`.
                  nullable: true
            license:
              allOf:
                - $ref: '#/components/schemas/Link'
                - description: A link to the license that this image is under.
            sourceFile:
              allOf:
                - $ref: '#/components/schemas/Link'
                - description: |
                    A link where the `href` field contains raster image file data, using the `data:` scheme. Example:

                    ```
                    data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==`
                    ```
            specificNode:
              allOf:
                - $ref: '#/components/schemas/Link'
                - description: A link to the node indicating the specific taxon that this image illustrates.
            vectorFile:
              allOf:
                - $ref: '#/components/schemas/Link'
                - description: |
                    A link where the `href` field contains vector image file data, using the `data:` scheme. Example:

                    ```
                    data:image/svg+xml,<svg width="1" height="1"></svg>`
                    ```
                  nullable: true
        attribution:
          type: string
          example: 'Charles Knight'
          nullable: true
    ImageWithEmbedded:
      description: Resource for an image.
      required:
        - _embedded
      allOf:
        - type: object
          properties:
            _embedded:
              type: object
              description: Embedded entities related to the image. See `_links` for more information.
              properties:
                contributor:
                  $ref: '#/components/schemas/Account'
                generalNode:
                  allOf:
                    - $ref: '#/components/schemas/Node'
                    - nullable: true
                nodes:
                  type: array
                  readOnly: true
                  items:
                    $ref: '#/components/schemas/Node'
                specificNode:
                  $ref: '#/components/schemas/Node'
        - $ref: '#/components/schemas/Image'
    Link:
      description: A basic link.
      type: object
      required:
        - href
      properties:
        href:
          format: url
          type: string
          example: /path
    MediaLink:
      allOf:
        - $ref: '#/components/schemas/Link'
        - type: object
          description: A link to an image file.
          required:
            - href
            - sizes
            - type
          properties:
            href:
              example: '/path/123e4567-e89b-12d3-a456-426655440000/raster32.png'
            sizes:
              pattern: '^\d+x\d+$'
              type: string
              example: 32x32
            type:
              format: mimetype
              type: string
              example: 'image/png'
    Node:
      allOf:
        - $ref: '#/components/schemas/Entity'
        - description: A phylogenetic node, corresponding to a taxonomic unit.
          type: object
          required:
            - _links
            - names
            - root
          properties:
            _links:
              type: object
              required:
                - childNodes
                - contributor
                - descendantImageSet
                - external
                - parentNode
                - primaryImage
                - self
                - selfImageSet
              properties:
                childNodes:
                  type: array
                  description: |
                    Links to all immediate descendant nodes, in alphabetical order.
                    Note that this only includes illustrated nodes.
                  items:
                    allOf:
                      - $ref: '#/components/schemas/Link'
                      - readOnly: true
                contributor:
                  allOf:
                    - $ref: '#/components/schemas/Link'
                    - description: A link to the account of the user who submitted this node.
                      readOnly: true
                descendantImageSet:
                  allOf:
                    - $ref: '#/components/schemas/Link'
                    - description: Link to an image set with all images illustrating all descendant nodes.
                      nullable: true
                      readOnly: true
                external:
                  type: array
                  description: Links to the same node under other domains (for example, Encyclopedia of Life).
                  items:
                    $ref: '#/components/schemas/TitledLink'
                parentNode:
                  allOf:
                    - $ref: '#/components/schemas/Link'
                    - description: Link to the parent node (immediate ancestor).
                      nullable: true
                primaryImage:
                  allOf:
                    - $ref: '#/components/schemas/Link'
                    - description: Link to the primary image for this node.
                      nullable: true
                selfImageSet:
                  allOf:
                    - $ref: '#/components/schemas/Link'
                    - description: Link to an image set with all images illustrating this nodes.
                      nullable: true
                      readOnly: true
            names:
              type: array
              description: A list of all of this node's names, starting with the preferred name.
              items:
                $ref: '#/components/schemas/NodeName'
            root:
              description: A flag that, if `true`, indicates that this is a root node and should not have a parent.
              type: boolean
    NodeChoices:
      type: object
      description: A list of matching nodes.
      required:
        - _embedded
        - _links
      properties:
        _embedded:
          type: object
          required:
            - choices
          properties:
            choices:
              type: array
              items:
                $ref: '#/components/schemas/Node'
        _links:
          type: object
          required:
            - self
          properties:
            self:
              $ref: '#/components/schemas/Link'
    NodeDomain:
      allOf:
        - $ref: '#/components/schemas/Domain'
        - type: object
          description: The domain for all phylogenetic nodes.
          required:
            - _links
          properties:
            _links:
              type: object
              required:
                - rootNode
                - search
              properties:
                rootNode:
                  allOf:
                    - $ref: '#/components/schemas/Link'
                    - description: Link to the root node (ancestor to all other nodes).
                search:
                  allOf:
                    - $ref: '#/components/schemas/Link'
                    - description: Endpoint for searching for phylogenetic nodes.
    NodeName:
      description: A taxonomic name, associated with a phylogenetic node.
      type: array
      items:
        type: object
        required:
          - class
          - text
        properties:
          class:
            format: '^(citation|comment|operator|rank|scientific|vernacular)$'
            type: string
            example: scientific
          text:
            format: '^\S+( \S+)*$'
            type: string
            example: Homo sapiens
    NodePatch:
      description: Update for a phylogenetic node.
      type: object
      properties:
        _links:
          type: object
          properties:
            external:
              type: array
              description: Links to the same node under other domains (for example, Encyclopedia of Life).
              items:
                $ref: '#/components/schemas/Link'
            parentNode:
              allOf:
                - $ref: '#/components/schemas/Link'
                - description: Link to the parent node (immediate ancestor).
                  nullable: true
        names:
          type: array
          description: A list of all of this node's names, starting with the preferred name.
          items:
            $ref: '#/components/schemas/NodeName'
        root:
          description: A flag that, if `true`, indicates that this is a root node and should not have a parent.
          type: boolean
    NodePost:
      description: Data for creating a phylogenetic node.
      type: object
      required:
        - _links
        - names
      properties:
        _links:
          type: object
          required:
            - parentNode
          properties:
            external:
              type: array
              description: Links to the same node under other domains (for example, Encyclopedia of Life).
              items:
                $ref: '#/components/schemas/Link'
            parentNode:
              allOf:
                - $ref: '#/components/schemas/Link'
                - description: Link to the parent node (immediate ancestor).
                  nullable: true
        names:
          type: array
          description: A list of all of this node's names, starting with the preferred name.
          items:
            $ref: '#/components/schemas/NodeName'
    NodeReference:
      description: A reference to a phylogenetic node.
      required:
        - _embedded
        - _links
        - names
      properties:
        _embedded:
          type: object
          properties:
            primaryImage:
              $ref: '#/components/schemas/Image'
        _links:
          type: object
          required:
            - self
          properties:
            self:
              $ref: '#/components/schemas/Link'
        names:
          type: array
          items:
            $ref: '#/components/schemas/NodeName'
    NodeWithEmbedded:
      description: A resource for a phylogenetic node.
      required:
        - _embedded
        - _links
        - names
        - root
      allOf:
        - type: object
          properties:
            _embedded:
              type: object
              description: Embedded entities related to the phylogenetic node. See `_links` for more information.
              properties:
                childNodes:
                  type: array
                  items:
                    $ref: '#/components/schemas/Node'
                contributor:
                  allOf:
                    - $ref: '#/components/schemas/Account'
                    - nullable: true
                parentNode:
                  allOf:
                    - $ref: '#/components/schemas/Node'
                    - nullable: true
                primaryImage:
                  allOf:
                    - $ref: '#/components/schemas/Image'
                    - nullable: true
        - $ref: '#/components/schemas/Node'
    TitledLink:
      description: A link with a title, usually for an external resource.
      allOf:
        - $ref: '#/components/schemas/Link'
        - type: object
          required:
            - title
          properties:
            title:
              type: string
              example: 'Resource Name'
  securitySchemes:
    bearerAuth:
      description: User signed in to Amazon Cognito.
      type: http
      scheme: bearer
      bearerFormat: JWT
    keyAuth:
      description: User consuming the API data, but not making changes.
      type: apiKey
      in: header
      name: X-API-Key
paths:
  /:
    get:
      operationId: getRoot
      summary: API information and links to resources.
      parameters:
        - $ref: '#/components/parameters/Accept'
      security:
        - apiKeyAuth: []
      responses:
        '200':
          description: |
            [HAL](http://stateless.co/hal_specification.html) [JSON](https://www.json.org/) resource description for the API.
          headers:
            Content-Type:
              $ref: '#/components/headers/Content-Type'
          content:
            application/vnd.phylopic.v2+json:
              schema:
                type: object
                required:
                  - _links
                  - title
                  - version
                properties:
                  _links:
                    type: object
                    required:
                      - contact
                      - documentation
                      - resources
                      - self
                    properties:
                      contact:
                        $ref: '#/components/schemas/TitledLink'
                      documentation:
                        $ref: '#/components/schemas/Link'
                      resources:
                        type: array
                        items:
                          $ref: '#/components/schemas/TitledLink'
                      self:
                        $ref: '#/components/schemas/Link'
                  title:
                    type: string
                    example: PhyloPic API
                  version:
                    pattern: '^\d+\.\d+\.\d+(-(alpha|beta|rc)(\.\d+)?)?'
                    type: string
                    example: 2.0.0-alpha
        '406':
          $ref: '#/components/responses/406'
  /accounts/{uuid}:
    get:
      operationId: getAccount
      summary: Returns a specific user account.
      parameters:
        - $ref: '#/components/parameters/Accept'
        - $ref: '#/components/parameters/uuid-Entity'
      security:
        - apiKeyAuth: []
      responses:
        '200':
          description: |
            [HAL](http://stateless.co/hal_specification.html) [JSON](https://www.json.org/) user account record.
          headers:
            Content-Type:
              $ref: '#/components/headers/Content-Type'
          content:
            application/vnd.phylopic.v2+json:
              schema:
                $ref: '#/components/schemas/Account'
        '404':
          $ref: '#/components/responses/404'
        '406':
          $ref: '#/components/responses/406'
        '410':
          $ref: '#/components/responses/410'
  /images:
    get:
      operationId: getImages
      summary: Returns links to resources for images.
      parameters:
        - $ref: '#/components/parameters/Accept'
      security:
        - apiKeyAuth: []
      responses:
        '200':
          description: |
            [HAL](http://stateless.co/hal_specification.html) [JSON](https://www.json.org/) domain resource.
          headers:
            Content-Type:
              $ref: '#/components/headers/Content-Type'
          content:
            application/vnd.phylopic.v2+json:
              schema:
                $ref: '#/components/schemas/ImageDomain'
        '406':
          $ref: '#/components/responses/406'
  /images/{uuid}:
    delete:
      operationId: deleteImage
      summary: Removes a specific image.
      description: Also removes any pending changes.
      parameters:
        - $ref: '#/components/parameters/Accept'
        - $ref: '#/components/parameters/uuid-Entity'
      security:
        - bearerAuth: []
      responses:
        '204':
          $ref: '#/components/responses/204'
        '401':
          $ref: '#/components/responses/401'
        '403':
          $ref: '#/components/responses/403'
        '404':
          $ref: '#/components/responses/404'
        '406':
          $ref: '#/components/responses/406'
        '410':
          $ref: '#/components/responses/410'
    get:
      operationId: getImage
      summary: Returns data for a specific image.
      parameters:
        - $ref: '#/components/parameters/Accept'
        - $ref: '#/components/parameters/uuid-Entity'
        - $ref: '#/components/parameters/embed-Image'
      security:
        - apiKeyAuth: []
      responses:
        '200':
          description: |
            [HAL](http://stateless.co/hal_specification.html) [JSON](https://www.json.org/) image record.
          headers:
            Content-Type:
              $ref: '#/components/headers/Content-Type'
          content:
            application/vnd.phylopic.v2+json:
              schema:
                $ref: '#/components/schemas/ImageWithEmbedded'
        '404':
          $ref: '#/components/responses/404'
        '406':
          $ref: '#/components/responses/406'
        '410':
          $ref: '#/components/responses/410'
    patch:
      operationId: patchImage
      summary: Updates an existing image.
      description: |
        The response returns an image record for the updated image.

        Certain changes (updating the source file or the assigned nodes), require review.
        These requests will return `202` rather than `200`. If `202`, the response has the same modifications
        as for [`POST /images/{uuid}`](#postImage).

        To upload a new file, the `sourceFile` link should be a URL with the `data:` scheme, as for
        [`POST /images/{uuid}`](#postImage). If the new file is a vector file, both `sourceFile` and `vectorFile`
        must be populated.
      parameters:
        - $ref: '#/components/parameters/Accept'
        - $ref: '#/components/parameters/uuid-Entity'
      requestBody:
        required: true
        content:
          application/vnd.phylopic.v2+json:
            schema:
              $ref: '#/components/schemas/ImagePatch'
      security:
        - bearerAuth: []
      responses:
        '200':
          description: |
            [HAL](http://stateless.co/hal_specification.html) [JSON](https://www.json.org/) image record.
          headers:
            Content-Type:
              $ref: '#/components/headers/Content-Type'
          content:
            application/vnd.phylopic.v2+json:
              schema:
                $ref: '#/components/schemas/Image'
        '202':
          description: |
            [HAL](http://stateless.co/hal_specification.html) [JSON](https://www.json.org/) image record.
          headers:
            Content-Type:
              $ref: '#/components/headers/Content-Type'
          content:
            application/vnd.phylopic.v2+json:
              schema:
                $ref: '#/components/schemas/Image'
        '303':
          description: The file was already uploaded for another image.
          headers:
            Location:
              $ref: '#/components/headers/Location'
        '400':
          $ref: '#/components/responses/400'
        '401':
          $ref: '#/components/responses/401'
        '403':
          $ref: '#/components/responses/403'
        '404':
          $ref: '#/components/responses/404'
        '406':
          $ref: '#/components/responses/406'
        '410':
          $ref: '#/components/responses/410'
        '413':
          $ref: '#/components/responses/413'
    post:
      operationId: postImage
      summary: Uploads a new image (file and data) to be added to the site, pending review.
      description: |
        On success, this method returns the image record as it will be if it is approved, with the following exceptions:
        - The `self` link is to a temporary location (see [`GET /submissions/{uuid}`](#getSubmission)).
        - The `sourceFile` link is to a temporary location, not the final location (see [`GET /submissionfiles/raster/{uuid}`](#getSubmissionRasterFile)).
        - The `vectorFile` link, if present, is to a temporary location, not the final location (see [`GET /submissionfiles/vector/{uuid}`](#getSubmissionVectorFile)).
        - The other image file links (`https://ogp.me/ns#image`, `resizedFiles`, `twitter:image`) will be `null`.
      parameters:
        - $ref: '#/components/parameters/Accept'
        - $ref: '#/components/parameters/uuid-Entity'
      requestBody:
        required: true
        content:
          application/vnd.phylopic.v2+json:
            schema:
              $ref: '#/components/schemas/ImagePost'
      security:
        - bearerAuth: []
      responses:
        '202':
          description: |
            [HAL](http://stateless.co/hal_specification.html) [JSON](https://www.json.org/) image record.
          headers:
            Content-Type:
              $ref: '#/components/headers/Content-Type'
          content:
            application/vnd.phylopic.v2+json:
              schema:
                $ref: '#/components/schemas/Image'
        '303':
          description: The file was already uploaded for another image.
          headers:
            Location:
              $ref: '#/components/headers/Location'
        '400':
          $ref: '#/components/responses/400'
        '401':
          $ref: '#/components/responses/401'
        '403':
          $ref: '#/components/responses/403'
        '406':
          $ref: '#/components/responses/406'
        '409':
          $ref: '#/components/responses/409'
        '413':
          $ref: '#/components/responses/413'
  /imagesets/{uuid}:
    get:
      operationId: getImageSet
      summary: Returns a specific set of images.
      parameters:
        - $ref: '#/components/parameters/Accept'
        - $ref: '#/components/parameters/Range'
        - $ref: '#/components/parameters/uuid-Entity'
        - $ref: '#/components/parameters/embed-Image'
        - name: created_lt
          in: query
          required: false
          description: Limits results to entries created on or before this time.
          schema:
            format: date-time
            type: string
        - name: created_gt
          in: query
          required: false
          description: Limits results to entries created on or after this time.
          schema:
            format: date-time
            type: string
        - name: licensecomponents
          in: query
          required: false
          description: |
            Limits entries to those with or without certain license components.

            Components are represented as a space-separated list. May include:
            - `by` (Attribution)
            - `nc` (Noncommercial)
            - `sa` (Standalone)

            Any of these may be prepended by `-` to indicate that only images under licenses **without** that component should be returned.

            Examples:
            - `by`: only include images with licenses that require attribution.
            - `-by`: exclude all images with licenses that require attribution.
            - `-by -nc -sa`: only include images in the public domain (having none of the license components).
          schema:
            format: '^(\-?(by|nc|sa) )*(\-?(by|nc|sa))$'
            type: string
        - name: modified_lt
          in: query
          required: false
          description: Limits results to entries modified on or before this time.
          schema:
            format: date-time
            type: string
        - name: modified_gt
          in: query
          required: false
          description: Limits results to entries modified on or after this time.
          schema:
            format: date-time
            type: string
        - name: sort
          in: query
          required: false
          description: |
            A space-separated list of fields to sort by. May include:
            - `created`
            - `modified`

            Either of these may be prepended by `-` to indicate descending order. The default value is `-modified`.
          schema:
            pattern: '^(\-?(created|modified) )*(\-?(created|modified))$'
            type: string
      security:
        - apiKeyAuth: []
      responses:
        '206':
          $ref: '#/components/responses/list-Image'
        '400':
          $ref: '#/components/responses/400'
        '406':
          $ref: '#/components/responses/406'
        '416':
          $ref: '#/components/responses/416'
  /licenses:
    get:
      operationId: getLicenses
      summary: Returns a list of licenses.
      description:
        Returns a list of all licenses that may be used for new submissions.

        Note that this does not include all licenses for all images in the database.
      parameters:
        - $ref: '#/components/parameters/Accept'
      security:
        - apiKeyAuth: []
      responses:
        '200':
          description: List of titled links to licenses.
          headers:
            Content-Type:
              $ref: '#/components/headers/Content-Type'
          content:
            application/vnd.phylopic.v2+json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/TitledLink'
        '406':
          $ref: '#/components/responses/406'
  /nodes:
    get:
      operationId: getNodes
      summary: Returns links to resources for phylogenetic nodes.
      parameters:
        - $ref: '#/components/parameters/Accept'
      security:
        - apiKeyAuth: []
      responses:
        '200':
          description: |
            [HAL](http://stateless.co/hal_specification.html) [JSON](https://www.json.org/) domain resource.
          headers:
            Content-Type:
              $ref: '#/components/headers/Content-Type'
          content:
            application/vnd.phylopic.v2+json:
              schema:
                  $ref: '#/components/schemas/NodeDomain'
        '406':
          $ref: '#/components/responses/406'
  /nodes/{uuid}:
    delete:
      operationId: deleteNode
      summary: Removes a specific phylogenetic node.
      parameters:
        - $ref: '#/components/parameters/Accept'
        - $ref: '#/components/parameters/uuid-Entity'
      security:
        - bearerAuth: []
      responses:
        '204':
          $ref: '#/components/responses/204'
        '401':
          $ref: '#/components/responses/401'
        '403':
          $ref: '#/components/responses/403'
        '404':
          $ref: '#/components/responses/404'
        '406':
          $ref: '#/components/responses/406'
        '410':
          $ref: '#/components/responses/410'
    get:
      operationId: getNode
      summary: Returns a specific phylogenetic node.
      parameters:
        - $ref: '#/components/parameters/Accept'
        - $ref: '#/components/parameters/uuid-Entity'
        - $ref: '#/components/parameters/embed-Node'
      security:
        - apiKeyAuth: []
      responses:
        '200':
          description: |
            [HAL](http://stateless.co/hal_specification.html) [JSON](https://www.json.org/) image record.
          headers:
            Content-Type:
              $ref: '#/components/headers/Content-Type'
          content:
            application/vnd.phylopic.v2+json:
              schema:
                $ref: '#/components/schemas/NodeWithEmbedded'
        '404':
          $ref: '#/components/responses/404'
        '406':
          $ref: '#/components/responses/406'
        '410':
          $ref: '#/components/responses/410'
    patch:
      operationId: patchNode
      summary: Updates a specific phylogenetic node.
      parameters:
        - $ref: '#/components/parameters/Accept'
        - $ref: '#/components/parameters/uuid-Entity'
      requestBody:
        required: true
        content:
          application/vnd.phylopic.v2+json:
            schema:
              $ref: '#/components/schemas/NodePatch'
      security:
        - bearerAuth: []
      responses:
        '200':
          description: |
            [HAL](http://stateless.co/hal_specification.html) [JSON](https://www.json.org/) image record.
          headers:
            Content-Type:
              $ref: '#/components/headers/Content-Type'
          content:
            application/vnd.phylopic.v2+json:
              schema:
                $ref: '#/components/schemas/Node'
        '400':
          $ref: '#/components/responses/400'
        '401':
          $ref: '#/components/responses/401'
        '403':
          $ref: '#/components/responses/403'
        '404':
          $ref: '#/components/responses/404'
        '406':
          $ref: '#/components/responses/406'
        '410':
          $ref: '#/components/responses/410'
    post:
      operationId: postNode
      summary: Creates a new phylogenetic node.
      parameters:
        - $ref: '#/components/parameters/Accept'
        - $ref: '#/components/parameters/uuid-Entity'
      requestBody:
        required: true
        content:
          application/vnd.phylopic.v2+json:
            schema:
              $ref: '#/components/schemas/NodePost'
      security:
        - bearerAuth: []
      responses:
        '201':
          description: The node has been created.
          headers:
            Content-Type:
              $ref: '#/components/headers/Content-Type'
          content:
            application/vnd.phylopic.v2+json:
              schema:
                $ref: '#/components/schemas/Node'
        '400':
          $ref: '#/components/responses/400'
        '401':
          $ref: '#/components/responses/401'
        '403':
          $ref: '#/components/responses/403'
        '406':
          $ref: '#/components/responses/406'
        '409':
          $ref: '#/components/responses/409'
  /ping:
    get:
      operationId: ping
      summary: Checks if the API is operational.
      responses:
        '204':
          $ref: '#/components/responses/204'
  /resolve:
    get:
      operationId: resolve
      summary: Resolves an external URI to the closest phylogenetic node.
      parameters:
        - $ref: '#/components/parameters/Accept'
        - name: uri
          in: query
          required: true
          description: The URI of the external resource.
          schema:
            format: uri
            type: string
          example: https://eol.org/pages/328046
      security:
        - apiKeyAuth: []
      responses:
        '300':
          description: Several possible matches were found.
          headers:
            Content-Type:
              $ref: '#/components/headers/Content-Type'
            Location:
              $ref: '#/components/headers/Location'
          content:
            application/vnd.phylopic.v2+json:
              schema:
                $ref: '#/components/schemas/NodeChoices'
        '307':
          description: A corresponding or ancestral node was found.
          headers:
            Location:
              $ref: '#/components/headers/Location'
        '400':
          $ref: '#/components/responses/400'
        '404':
          $ref: '#/components/responses/404'
        '406':
          $ref: '#/components/responses/406'
  /search/nodes:
    get:
      operationId: searchNodes
      summary: Returns an embedded list of references to nodes whose names match a search string.
      parameters:
        - $ref: '#/components/parameters/Accept'
        - $ref: '#/components/parameters/Range'
        - name: query
          in: query
          required: true
          description: The text to search for. Must be at least two characters, trimmed of whitespace.
          schema:
            type: string
            example: Homo sapiens
      security:
        - apiKeyAuth: []
      responses:
        '206':
          description: |
            [HAL](http://stateless.co/hal_specification.html) [JSON](https://www.json.org/) description of search results.
          headers:
            Accept-Ranges:
              $ref: '#/components/headers/Accept-Ranges'
            Content-Range:
              $ref: '#/components/headers/Content-Range'
            Content-Type:
              $ref: '#/components/headers/Content-Type'
          content:
            application/vnd.phylopic.v2+json:
              schema:
                type: object
                required:
                  - _embedded
                  - _links
                  - query
                properties:
                  _embedded:
                    type: object
                    properties:
                      items:
                        type: array
                        items:
                          $ref: '#/components/schemas/NodeReference'
                  _links:
                    type: object
                    required:
                      - self
                    properties:
                      self:
                        $ref: '#/components/schemas/Link'
                  query:
                    type: string
                    example: Homo sapiens
        '400':
          $ref: '#/components/responses/400'
        '406':
          $ref: '#/components/responses/406'
        '416':
          $ref: '#/components/responses/416'
  /submissions:
    get:
      operationId: getSubmissions
      summary: List all pending submissions.
      description: |
        Users can only see their own submissions, except for administrators.

        Submissions are always listed from first submitted to last submitted.
      parameters:
        - $ref: '#/components/parameters/Accept'
        - $ref: '#/components/parameters/Range'
        - $ref: '#/components/parameters/embed-Image'
      security:
        - bearerAuth: []
      responses:
        '206':
          $ref: '#/components/responses/list-Image'
        '400':
          $ref: '#/components/responses/400'
        '401':
          $ref: '#/components/responses/401'
        '406':
          $ref: '#/components/responses/406'
        '416':
          $ref: '#/components/responses/416'
  /submissions/{uuid}:
    delete:
      operationId: deleteSubmission
      summary: Deletes an image submission.
      description: Users can only delete their own submissions, except for administrators.
      parameters:
        - $ref: '#/components/parameters/Accept'
        - $ref: '#/components/parameters/uuid-Entity'
      security:
        - bearerAuth: []
      responses:
        '204':
          $ref: '#/components/responses/204'
        '401':
          $ref: '#/components/responses/401'
        '403':
          $ref: '#/components/responses/403'
        '404':
          $ref: '#/components/responses/404'
        '406':
          $ref: '#/components/responses/406'
        '410':
          $ref: '#/components/responses/410'
    get:
      operationId: getSubmission
      summary: Retrieves an image submission.
      description: Users can only view their own submissions, except for administrators.
      parameters:
        - $ref: '#/components/parameters/Accept'
        - $ref: '#/components/parameters/uuid-Entity'
        - $ref: '#/components/parameters/embed-Image'
      security:
        - bearerAuth: []
      responses:
        '200':
          description: |
            [HAL](http://stateless.co/hal_specification.html) [JSON](https://www.json.org/) image record.
          headers:
            Content-Type:
              $ref: '#/components/headers/Content-Type'
          content:
            application/vnd.phylopic.v2+json:
              schema:
                $ref: '#/components/schemas/ImageWithEmbedded'
        '404':
          $ref: '#/components/responses/404'
        '406':
          $ref: '#/components/responses/406'
        '410':
          $ref: '#/components/responses/410'
    patch:
      operationId: patchSubmission
      summary: |
        Approves a submission and promotes it to the image gallery.

        Only available for administrators.
      parameters:
        - $ref: '#/components/parameters/Accept'
        - $ref: '#/components/parameters/uuid-Entity'
      security:
        - bearerAuth: []
      responses:
        '204':
          $ref: '#/components/responses/204'
        '401':
          $ref: '#/components/responses/401'
        '403':
          $ref: '#/components/responses/403'
        '404':
          $ref: '#/components/responses/404'
        '406':
          $ref: '#/components/responses/406'
        '410':
          $ref: '#/components/responses/410'
  /submissionfiles/raster/{uuid}:
    get:
      operationId: getSubmissionRasterFile
      summary: Retrieves a submitted raster image file.
      description: Users can only view their own submitted files, except for administrators.
      parameters:
        - $ref: '#/components/parameters/uuid-Entity'
        - name: Accept
          in: header
          required: false
          description: |
            The MIME type for the response. Must allow the type of the submitted file. This may include:

            - `image/bmp`
            - `image/gif`
            - `image/jpeg`
            - `image/png`

            If omitted, `*/*` (a wildcard allowing all types) is assumed.
          schema:
            format: mimetype
            type: string
          example: image/bmp,image/gif,image/jpeg,image/png 
      security:
        - bearerAuth: []
      responses:
        '200':
          description: The raster image file, as it was uploaded.
          headers:
            Content-Length:
              $ref: '#/components/headers/Content-Length'
            Content-Type:
              description: |
                The MIME type for the response. Will be one of `image/bmp`, `image/gif`, `image/jpeg`, or `image/png`.
              example: image/png
              schema:
                format: mimetype
                type: string
          content:
            image/bmp:
              schema:
                format: binary
                type: string
            image/gif:
              schema:
                format: binary
                type: string
            image/jpeg:
              schema:
                format: binary
                type: string
            image/png:
              schema:
                format: binary
                type: string
        '401':
          $ref: '#/components/responses/401'
        '403':
          $ref: '#/components/responses/403'
        '404':
          $ref: '#/components/responses/404'
        '406':
          $ref: '#/components/responses/406'
        '410':
          $ref: '#/components/responses/410'
  /submissionfiles/vector/{uuid}:
    get:
      operationId: getSubmissionVectorFile
      summary: Retrieves a submitted vector image file.
      description: Users can only view their own submitted files, except for administrators.
      parameters:
        - $ref: '#/components/parameters/uuid-Entity'
        - name: Accept
          in: header
          required: false
          description: |
            The MIME type for the response. Must allow `image/svg+xml`.

            If omitted, `*/*` (a wildcard allowing all types) is assumed.
          schema:
            format: mimetype
            type: string
          example: image/svg+xml
      security:
        - bearerAuth: []
      responses:
        '200':
          description: The vector image file, as it was uploaded.
          headers:
            Content-Length:
              $ref: '#/components/headers/Content-Length'
            Content-Type:
              description: |
                The MIME type for the response. Will always be `image/svg+xml`.
              example: image/svg+xml
              schema:
                format: mimetype
                type: string
          content:
            image/svg+xml:
              schema:
                format: xml
                type: string
        '401':
          $ref: '#/components/responses/401'
        '403':
          $ref: '#/components/responses/403'
        '404':
          $ref: '#/components/responses/404'
        '406':
          $ref: '#/components/responses/406'
        '410':
          $ref: '#/components/responses/410'